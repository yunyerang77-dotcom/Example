<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì›¹ ë·°ì–´ - ì±… í˜•íƒœ í…ìŠ¤íŠ¸ ë·°ì–´</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* ì…ë ¥ ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .input-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .input-section h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 2.5rem;
        }

        .input-group {
            display: flex;
            gap: 15px;
            align-items: flex-end;
        }

        .input-group textarea {
            flex: 1;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1rem;
            font-family: inherit;
            resize: vertical;
            min-height: 120px;
            transition: border-color 0.3s ease;
        }

        .input-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            padding: 15px 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            white-space: nowrap;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        /* ë·°ì–´ ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .viewer-section {
            display: none;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .viewer-section.active {
            display: block;
        }

        /* ì±… ë ˆì´ì•„ì›ƒ ì»¨í…Œì´ë„ˆ */
        .book-container {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            gap: 20px;
            margin: 20px 0;
            perspective: 1000px;
        }

        /* ê°œë³„ í˜ì´ì§€ ìŠ¤íƒ€ì¼ */
        .page {
            width: 400px;
            min-height: 600px;
            background: white;
            border-radius: 8px;
            box-shadow: 
                0 4px 8px rgba(0, 0, 0, 0.1),
                0 8px 16px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            padding: 40px;
            position: relative;
            transition: transform 0.3s ease;
        }

        /* ì±…ì˜ ì¤‘ì•™ ë°”ì¸ë”© íš¨ê³¼ */
        .page::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, #ddd, #bbb, #ddd);
        }

        .page.right::before {
            right: 0;
            left: auto;
        }

        /* í˜ì´ì§€ ë‚´ìš© ìŠ¤íƒ€ì¼ */
        .page-content {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #2c3e50;
            text-align: justify;
            hyphens: auto;
        }

        .page-content h1 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #2c3e50;
            text-align: center;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
        }

        .page-content h2 {
            font-size: 1.4rem;
            margin: 20px 0 15px 0;
            color: #34495e;
        }

        .page-content p {
            margin-bottom: 15px;
            text-indent: 1.5em;
        }

        /* ë„¤ë¹„ê²Œì´ì…˜ ì»¨íŠ¸ë¡¤ */
        .navigation {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 30px;
        }

        .nav-btn {
            background: linear-gradient(45deg, #74b9ff, #0984e3);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .nav-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .page-info {
            background: white;
            padding: 10px 20px;
            border-radius: 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            font-weight: bold;
            color: #2c3e50;
        }

        /* í˜ì´ì§€ ì „í™˜ ì• ë‹ˆë©”ì´ì…˜ */
        .page-transition {
            animation: pageFlip 0.5s ease-in-out;
        }

        @keyframes pageFlip {
            0% { transform: rotateY(0deg); }
            50% { transform: rotateY(-10deg); }
            100% { transform: rotateY(0deg); }
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 900px) {
            .book-container {
                flex-direction: column;
                align-items: center;
            }
            
            .page {
                width: 100%;
                max-width: 400px;
            }
        }

        @media (max-width: 600px) {
            .input-group {
                flex-direction: column;
            }
            
            .page {
                padding: 20px;
                min-height: 400px;
            }
            
            .page-content {
                font-size: 1rem;
            }
        }

        /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ì…ë ¥ ì„¹ì…˜ -->
        <div class="input-section" id="inputSection">
            <h1>ğŸ“– ì›¹ ë·°ì–´</h1>
            <div class="input-group">
                <textarea id="textInput" placeholder="ì—¬ê¸°ì— í‘œì‹œí•  í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”...&#10;&#10;ì˜ˆì‹œ:&#10;ì œ1ì¥ ì‹œì‘&#10;&#10;ì´ê²ƒì€ ì›¹ ë·°ì–´ì˜ ì˜ˆì‹œ í…ìŠ¤íŠ¸ì…ë‹ˆë‹¤. ê¸´ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ë©´ ìë™ìœ¼ë¡œ í˜ì´ì§€ê°€ ë‚˜ë‰˜ì–´ í‘œì‹œë©ë‹ˆë‹¤.&#10;&#10;ì œ2ì¥ ê³„ì†&#10;&#10;ê° í˜ì´ì§€ëŠ” ì±…ì˜ í˜•íƒœë¡œ í‘œì‹œë˜ë©°, ì¢Œìš° í™”ì‚´í‘œ ë²„íŠ¼ì„ ì‚¬ìš©í•˜ì—¬ í˜ì´ì§€ë¥¼ ë„˜ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤."></textarea>
                <button class="btn" id="viewBtn">ë³´ê¸°</button>
            </div>
        </div>

        <!-- ë¡œë”© ì„¹ì…˜ -->
        <div class="loading" id="loadingSection">
            <div class="spinner"></div>
            <p>í˜ì´ì§€ë¥¼ ì¤€ë¹„í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
        </div>

        <!-- ë·°ì–´ ì„¹ì…˜ -->
        <div class="viewer-section" id="viewerSection">
            <div class="book-container">
                <div class="page left" id="leftPage">
                    <div class="page-content" id="leftPageContent"></div>
                </div>
                <div class="page right" id="rightPage">
                    <div class="page-content" id="rightPageContent"></div>
                </div>
            </div>
            
            <div class="navigation">
                <button class="nav-btn" id="prevBtn" disabled>â€¹</button>
                <div class="page-info" id="pageInfo">1 / 1</div>
                <button class="nav-btn" id="nextBtn" disabled>â€º</button>
            </div>
        </div>
    </div>

    <script>
        // DOM ìš”ì†Œë“¤
        const inputSection = document.getElementById('inputSection');
        const loadingSection = document.getElementById('loadingSection');
        const viewerSection = document.getElementById('viewerSection');
        const textInput = document.getElementById('textInput');
        const viewBtn = document.getElementById('viewBtn');
        const leftPageContent = document.getElementById('leftPageContent');
        const rightPageContent = document.getElementById('rightPageContent');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const pageInfo = document.getElementById('pageInfo');

        // ì „ì—­ ë³€ìˆ˜
        let pages = []; // í˜ì´ì§€ë³„ í…ìŠ¤íŠ¸ë¥¼ ì €ì¥í•˜ëŠ” ë°°ì—´
        let currentPageIndex = 0; // í˜„ì¬ í˜ì´ì§€ ì¸ë±ìŠ¤

        // í˜ì´ì§€ë‹¹ ìµœëŒ€ ê¸€ì ìˆ˜ (ì‹¤ì œë¡œëŠ” ë” ì •êµí•œ ê³„ì‚°ì´ í•„ìš”í•˜ì§€ë§Œ ê°„ë‹¨íˆ êµ¬í˜„)
        const MAX_CHARS_PER_PAGE = 2000;

        /**
         * í…ìŠ¤íŠ¸ë¥¼ í˜ì´ì§€ ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ëŠ” í•¨ìˆ˜
         * @param {string} text - ë‚˜ëˆŒ í…ìŠ¤íŠ¸
         * @returns {Array} í˜ì´ì§€ë³„ í…ìŠ¤íŠ¸ ë°°ì—´
         */
        function splitTextIntoPages(text) {
            if (!text.trim()) {
                return ['í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.'];
            }

            const paragraphs = text.split('\n\n'); // ë¹ˆ ì¤„ë¡œ ë¬¸ë‹¨ êµ¬ë¶„
            const pages = [];
            let currentPage = '';

            for (let paragraph of paragraphs) {
                // ë¬¸ë‹¨ì´ ë„ˆë¬´ ê¸¸ë©´ ë¬¸ì¥ ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ê¸°
                if (paragraph.length > MAX_CHARS_PER_PAGE) {
                    const sentences = paragraph.split(/[.!?]+/);
                    let currentSentence = '';
                    
                    for (let sentence of sentences) {
                        if (sentence.trim()) {
                            sentence = sentence.trim() + '.';
                            
                            if ((currentPage + currentSentence + sentence).length > MAX_CHARS_PER_PAGE) {
                                if (currentPage.trim()) {
                                    pages.push(currentPage.trim());
                                    currentPage = '';
                                }
                                currentPage = currentSentence + sentence + '\n\n';
                                currentSentence = '';
                            } else {
                                currentSentence += sentence + ' ';
                            }
                        }
                    }
                    
                    if (currentSentence.trim()) {
                        currentPage += currentSentence + '\n\n';
                    }
                } else {
                    // ë¬¸ë‹¨ì´ í˜ì´ì§€ì— ë“¤ì–´ê°ˆ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸
                    if ((currentPage + paragraph).length > MAX_CHARS_PER_PAGE) {
                        if (currentPage.trim()) {
                            pages.push(currentPage.trim());
                        }
                        currentPage = paragraph + '\n\n';
                    } else {
                        currentPage += paragraph + '\n\n';
                    }
                }
            }

            // ë§ˆì§€ë§‰ í˜ì´ì§€ ì¶”ê°€
            if (currentPage.trim()) {
                pages.push(currentPage.trim());
            }

            return pages.length > 0 ? pages : ['í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.'];
        }

        /**
         * í˜ì´ì§€ë¥¼ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
         * @param {number} pageIndex - í‘œì‹œí•  í˜ì´ì§€ ì¸ë±ìŠ¤
         */
        function displayPage(pageIndex) {
            if (pageIndex < 0 || pageIndex >= pages.length) return;

            const leftPageIndex = pageIndex * 2;
            const rightPageIndex = pageIndex * 2 + 1;

            // ì¢Œì¸¡ í˜ì´ì§€ ì„¤ì •
            if (leftPageIndex < pages.length) {
                leftPageContent.innerHTML = formatPageContent(pages[leftPageIndex]);
            } else {
                leftPageContent.innerHTML = '';
            }

            // ìš°ì¸¡ í˜ì´ì§€ ì„¤ì •
            if (rightPageIndex < pages.length) {
                rightPageContent.innerHTML = formatPageContent(pages[rightPageIndex]);
            } else {
                rightPageContent.innerHTML = '';
            }

            // í˜ì´ì§€ ì •ë³´ ì—…ë°ì´íŠ¸
            const totalPages = Math.ceil(pages.length / 2);
            pageInfo.textContent = `${pageIndex + 1} / ${totalPages}`;

            // ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            prevBtn.disabled = pageIndex === 0;
            nextBtn.disabled = pageIndex >= totalPages - 1;

            // í˜ì´ì§€ ì „í™˜ ì• ë‹ˆë©”ì´ì…˜
            document.querySelectorAll('.page').forEach(page => {
                page.classList.add('page-transition');
                setTimeout(() => {
                    page.classList.remove('page-transition');
                }, 500);
            });
        }

        /**
         * í˜ì´ì§€ ë‚´ìš©ì„ HTMLë¡œ í¬ë§·íŒ…í•˜ëŠ” í•¨ìˆ˜
         * @param {string} content - í˜ì´ì§€ ë‚´ìš©
         * @returns {string} HTML í¬ë§·ëœ ë‚´ìš©
         */
        function formatPageContent(content) {
            if (!content) return '';

            // ì œëª© ê°ì§€ (ìˆ«ìë¡œ ì‹œì‘í•˜ëŠ” ì¤„)
            let formatted = content.replace(/^(\d+[ì¥ì ˆ]?\.?\s+.+)$/gm, '<h1>$1</h1>');
            
            // ë¶€ì œëª© ê°ì§€ (##ë¡œ ì‹œì‘í•˜ëŠ” ì¤„)
            formatted = formatted.replace(/^##\s+(.+)$/gm, '<h2>$1</h2>');
            
            // ë¬¸ë‹¨ì„ p íƒœê·¸ë¡œ ê°ì‹¸ê¸°
            formatted = formatted.replace(/\n\n/g, '</p><p>');
            formatted = '<p>' + formatted + '</p>';
            
            // ë¹ˆ p íƒœê·¸ ì œê±°
            formatted = formatted.replace(/<p><\/p>/g, '');
            formatted = formatted.replace(/<p>\s*<\/p>/g, '');

            return formatted;
        }

        /**
         * ë·°ì–´ë¥¼ ì´ˆê¸°í™”í•˜ëŠ” í•¨ìˆ˜
         */
        function initializeViewer() {
            const text = textInput.value.trim();
            
            if (!text) {
                alert('í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ë¡œë”© í‘œì‹œ
            inputSection.style.display = 'none';
            loadingSection.classList.add('active');
            viewerSection.classList.remove('active');

            // ë¹„ë™ê¸° ì²˜ë¦¬ë¡œ ë¶€ë“œëŸ¬ìš´ ì „í™˜
            setTimeout(() => {
                // í…ìŠ¤íŠ¸ë¥¼ í˜ì´ì§€ë¡œ ë‚˜ëˆ„ê¸°
                pages = splitTextIntoPages(text);
                currentPageIndex = 0;

                // ì²« í˜ì´ì§€ í‘œì‹œ
                displayPage(currentPageIndex);

                // ë·°ì–´ í‘œì‹œ
                loadingSection.classList.remove('active');
                viewerSection.classList.add('active');
            }, 500);
        }

        /**
         * ì´ì „ í˜ì´ì§€ë¡œ ì´ë™
         */
        function goToPreviousPage() {
            if (currentPageIndex > 0) {
                currentPageIndex--;
                displayPage(currentPageIndex);
            }
        }

        /**
         * ë‹¤ìŒ í˜ì´ì§€ë¡œ ì´ë™
         */
        function goToNextPage() {
            const totalPages = Math.ceil(pages.length / 2);
            if (currentPageIndex < totalPages - 1) {
                currentPageIndex++;
                displayPage(currentPageIndex);
            }
        }

        /**
         * ì…ë ¥ ì„¹ì…˜ìœ¼ë¡œ ëŒì•„ê°€ê¸°
         */
        function backToInput() {
            viewerSection.classList.remove('active');
            inputSection.style.display = 'block';
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
        viewBtn.addEventListener('click', initializeViewer);
        prevBtn.addEventListener('click', goToPreviousPage);
        nextBtn.addEventListener('click', goToNextPage);

        // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
        document.addEventListener('keydown', (e) => {
            if (viewerSection.classList.contains('active')) {
                if (e.key === 'ArrowLeft') {
                    goToPreviousPage();
                } else if (e.key === 'ArrowRight') {
                    goToNextPage();
                } else if (e.key === 'Escape') {
                    backToInput();
                }
            }
        });

        // Enter + Ctrlë¡œ ë·°ì–´ ì‹œì‘
        textInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && e.ctrlKey) {
                initializeViewer();
            }
        });

        // ì´ˆê¸°í™”
        function init() {
            // ì˜ˆì‹œ í…ìŠ¤íŠ¸ ì„¤ì •
            const exampleText = `ì œ1ì¥ ì›¹ ë·°ì–´ì˜ ì‹œì‘

ì´ê²ƒì€ ì›¹ ë·°ì–´ì˜ ì˜ˆì‹œ í…ìŠ¤íŠ¸ì…ë‹ˆë‹¤. ê¸´ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ë©´ ìë™ìœ¼ë¡œ í˜ì´ì§€ê°€ ë‚˜ë‰˜ì–´ í‘œì‹œë©ë‹ˆë‹¤.

ì›¹ ë·°ì–´ëŠ” ì‚¬ìš©ìê°€ ì…ë ¥í•œ í…ìŠ¤íŠ¸ë¥¼ ì±…ì˜ í˜•íƒœë¡œ ë³´ì—¬ì£¼ëŠ” ë„êµ¬ì…ë‹ˆë‹¤. ê° í˜ì´ì§€ëŠ” ë§ˆì¹˜ ì‹¤ì œ ì±…ì²˜ëŸ¼ ë³´ì´ë„ë¡ ë””ìì¸ë˜ì—ˆìŠµë‹ˆë‹¤.

ì œ2ì¥ ê¸°ëŠ¥ ì†Œê°œ

## ì£¼ìš” ê¸°ëŠ¥

ì´ ë·°ì–´ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤:

1. í…ìŠ¤íŠ¸ ì…ë ¥ ë° ìë™ í˜ì´ì§€ ë¶„í• 
2. ì¢Œìš° í™”ì‚´í‘œë¥¼ í†µí•œ í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜
3. í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì§€ì› (ì¢Œìš° í™”ì‚´í‘œ, ESC)
4. ë°˜ì‘í˜• ë””ìì¸ìœ¼ë¡œ ë‹¤ì–‘í•œ í™”ë©´ í¬ê¸° ì§€ì›

## ì‚¬ìš©ë²•

í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ê³  "ë³´ê¸°" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì±… í˜•íƒœë¡œ í‘œì‹œë©ë‹ˆë‹¤. ì¢Œìš° í™”ì‚´í‘œ ë²„íŠ¼ì´ë‚˜ í‚¤ë³´ë“œì˜ í™”ì‚´í‘œ í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ í˜ì´ì§€ë¥¼ ë„˜ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì œ3ì¥ ë§ˆë¬´ë¦¬

ì´ì œ ì—¬ëŸ¬ë¶„ë§Œì˜ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì—¬ ì›¹ ë·°ì–´ë¥¼ ì‚¬ìš©í•´ë³´ì„¸ìš”. ê¸´ ë¬¸ì„œë„ ìë™ìœ¼ë¡œ í˜ì´ì§€ê°€ ë‚˜ë‰˜ì–´ í¸ë¦¬í•˜ê²Œ ì½ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì¢‹ì€ í•˜ë£¨ ë˜ì„¸ìš”!`;

            textInput.value = exampleText;
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        init();
    </script>
</body>
</html>

